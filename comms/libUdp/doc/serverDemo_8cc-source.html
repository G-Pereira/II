<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>serverDemo.cc Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.13.1 -->
<h1>serverDemo.cc</h1><a href="serverDemo_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00034 <font class="preprocessor">#include &lt;stdlib.h&gt;</font>
00035 <font class="preprocessor">#include &lt;assert.h&gt;</font>
00036 <font class="preprocessor">#include &lt;string.h&gt;</font>
00037 <font class="preprocessor">#include &lt;iostream.h&gt;</font>
00038 <font class="preprocessor">#include &lt;stdlib.h&gt;</font>
00039 <font class="preprocessor">#include &lt;unistd.h&gt;</font>
00040 <font class="preprocessor">#include "<a class="code" href="const_8h.html">const.h</a>"</font>
00041 <font class="preprocessor">#include "string.h"</font>
00042 <font class="preprocessor">#include "<a class="code" href="serverDemo_8h.html">serverDemo.h</a>"</font>
00043 
00044 
<a name="l00045"></a><a class="code" href="classserverDemo.html#a0">00045</a> <a class="code" href="classserverDemo.html#a0">serverDemo :: serverDemo</a> (<font class="keywordtype">char</font>* new_service) : <a class="code" href="classserver.html">server</a> (new_service)
00046 {
00047   <a class="code" href="classserverDemo.html#o0">service</a> = NULL;
00048   <a class="code" href="classserverDemo.html#o1">packet</a> = NULL;
00049   <a class="code" href="classserverDemo.html#o0">service</a> = <font class="keyword">new</font> <font class="keywordtype">char</font> [ strlen (new_service) +1 ];
00050   assert (<a class="code" href="classserverDemo.html#o0">service</a> != NULL);
00051   strcpy (<a class="code" href="classserverDemo.html#o0">service</a>, new_service);
00052 }
00053 
<a name="l00054"></a><a class="code" href="classserverDemo.html#a1">00054</a> <a class="code" href="classserverDemo.html#a1">serverDemo :: ~serverDemo</a> ()
00055 {
00056   <font class="keywordflow">if</font> (<a class="code" href="classserverDemo.html#o0">service</a> != NULL)
00057     <font class="keyword">delete</font> <a class="code" href="classserverDemo.html#o0">service</a>;
00058   <font class="keywordflow">if</font> (<a class="code" href="classserverDemo.html#o1">packet</a> != NULL)
00059     <font class="keyword">delete</font> <a class="code" href="classserverDemo.html#o1">packet</a>;
00060 }
00061 
00062 
<a name="l00063"></a><a class="code" href="classserverDemo.html#a2">00063</a> <font class="keywordtype">void</font> <a class="code" href="classserverDemo.html#a2">serverDemo :: start</a> ()
00064 {
00065   cout &lt;&lt; <font class="stringliteral">"\n### Hello !\n"</font>;
00066   <font class="keywordflow">while</font> (true)
00067   {
00068     <font class="keywordflow">if</font> (<a class="code" href="classserver.html#b2">listenUDP</a> () == <font class="keyword">false</font>)
00069     {
00070       sleep (1);
00071       <font class="keywordflow">continue</font>;
00072     }
00073     cout &lt;&lt; <a class="code" href="classserver.html#b0">get_recived</a> () &lt;&lt; <font class="stringliteral">"\n"</font>;
00074     <a class="code" href="classserver.html#b1">answer</a> (<font class="stringliteral">"### I'm a server. I've just recived message from You."</font>);
00075   }
00076   cout &lt;&lt; <font class="stringliteral">"\n### Goodbye !\n"</font>;
00077 }
00078 
</pre></div><hr><address><small>&copy; 2002 &nbsp; Marcin Caban 'Cabko' and Borys Wisniewski 'Boria'</small></address>
</body>
</html>

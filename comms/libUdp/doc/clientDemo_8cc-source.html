<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>clientDemo.cc Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.13.1 -->
<h1>clientDemo.cc</h1><a href="clientDemo_8cc.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 
00034 <font class="preprocessor">#include &lt;sys/time.h&gt;</font>
00035 <font class="preprocessor">#include &lt;iostream.h&gt;</font>
00036 <font class="preprocessor">#include &lt;string.h&gt;</font>
00037 <font class="preprocessor">#include &lt;stdlib.h&gt;</font>
00038 <font class="preprocessor">#include &lt;assert.h&gt;</font>
00039 <font class="preprocessor">#include &lt;unistd.h&gt;</font>
00040 <font class="preprocessor">#include "<a class="code" href="const_8h.html">const.h</a>"</font>
00041 <font class="preprocessor">#include "<a class="code" href="clientDemo_8h.html">clientDemo.h</a>"</font>
00042 
00043 
<a name="l00044"></a><a class="code" href="clientDemo_8cc.html#a0">00044</a> <font class="keyword">extern</font> <font class="keywordtype">int</font> <a class="code" href="clientDemo_8cc.html#a0">errno</a>;
<a name="l00045"></a><a class="code" href="clientDemo_8cc.html#a1">00045</a> <font class="keyword">extern</font> <font class="keywordtype">char</font>* <a class="code" href="clientDemo_8cc.html#a1">sys_errlist</a>[];
00046 
00047 
<a name="l00048"></a><a class="code" href="classclientDemo.html#a0">00048</a> <a class="code" href="classclientDemo.html#a0">clientDemo :: clientDemo</a> (<font class="keywordtype">char</font>* service, <font class="keywordtype">char</font>* host) : <a class="code" href="classclient.html">client</a> ()
00049 {
00050   this-&gt;<a class="code" href="classclientDemo.html#o1">host</a> = <a class="code" href="classclientDemo.html#o1">host</a>;
00051   this-&gt;<a class="code" href="classclientDemo.html#o0">service</a> = <a class="code" href="classclientDemo.html#o0">service</a>;
00052 }
00053 
<a name="l00054"></a><a class="code" href="classclientDemo.html#a1">00054</a> <a class="code" href="classclientDemo.html#a1">clientDemo :: ~clientDemo</a> ()
00055 {
00056 }
00057 
<a name="l00058"></a><a class="code" href="classclientDemo.html#a2">00058</a> <font class="keywordtype">void</font> <a class="code" href="classclientDemo.html#a2">clientDemo :: start</a> ()
00059 {
00060   <font class="keywordtype">char</font> packet[1024];
00061   cout &lt;&lt; <font class="stringliteral">"\n### Hello!\n"</font>;
00062   <font class="keywordflow">switch</font> (fork())
00063   {
00064     <font class="keywordflow">case</font> 0:
00065       <font class="keywordflow">while</font> (true)
00066       {
00067         <font class="keywordflow">if</font> (<a class="code" href="classclient.html#b2">recive</a> (<a class="code" href="classclientDemo.html#o1">host</a>, <a class="code" href="classclientDemo.html#o0">service</a>, packet) == <font class="keyword">false</font>)
00068         {
00069         sleep (1);
00070           <font class="keywordflow">continue</font>;
00071         }
00072         cout &lt;&lt; <font class="stringliteral">"\n"</font> &lt;&lt; <a class="code" href="classclient.html#b0">get_recived</a> () &lt;&lt; <font class="stringliteral">"\n"</font>;  <font class="comment">// OK, but this thread has no terminal to write to</font>
00073       }
00074       <font class="keywordflow">break</font>;
00075     <font class="keywordflow">default</font>:
00076       <font class="keywordflow">while</font> (true)
00077       {
00078         cin.getline ( packet, 1024 );
00079         <a class="code" href="classclient.html#b1">send</a>(<a class="code" href="classclientDemo.html#o1">host</a>, <a class="code" href="classclientDemo.html#o0">service</a>, packet);
00080         <font class="keywordflow">if</font> (<a class="code" href="classclient.html#b2">recive</a> (<a class="code" href="classclientDemo.html#o1">host</a>, <a class="code" href="classclientDemo.html#o0">service</a>, packet) == <font class="keyword">false</font>)  <font class="comment">// dirty fix</font>
00081         {
00082           sleep (1);
00083           <font class="keywordflow">continue</font>;
00084         }
00085         cout &lt;&lt; <font class="stringliteral">"\n"</font> &lt;&lt; <a class="code" href="classclient.html#b0">get_recived</a> () &lt;&lt; <font class="stringliteral">"\n"</font>;       <font class="comment">//</font>
00086       }
00087       <font class="keywordflow">break</font>;
00088   }
00089   cout &lt;&lt; <font class="stringliteral">"\n### Goodbye !\n"</font>;
00090 }
00091 
</pre></div><hr><address><small>&copy; 2002 &nbsp; Marcin Caban 'Cabko' and Borys Wisniewski 'Boria'</small></address>
</body>
</html>
